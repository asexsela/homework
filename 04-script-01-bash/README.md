# Домашнее задание к занятию "3.9. Элементы безопасности информационных систем"


## 1. Обязательная задача 1

### Есть скрипт:


```bash

    a=1
    b=2
    c=a+b
    d=$a+$b
    e=$(($a+$b))
```

Какие значения переменным c,d,e будут присвоены? Почему?


| Переменная  | Значение | Обоснование |
| ------------- | ------------- | ------------- |
| `c`  | a+b  | Потому что это не переменные а строка, или нужно использовать let |
| `d`  | 1+2  | Вывелись переменные, но не сложились, так как результат должен быть заключен в конструкцию $(($a + $b)), или нужно использовать let |
| `e`  | 3  | Правильный синтаксис |


## 2. Обязательная задача 2

На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:


```bash

    while ((1==1)
    do
        curl http://localhost:9200
        if (($? != 0))
        then
            date >> curl.log
        fi
    done

```
### Ответ:

1) В цикле while не хватает закрывающей скобки

2) Нужно добавить проверку, чтобы выйти из цикла


```bash
    while ((1==1)
    do
        curl http://localhost:9200
        if (($? != 0))
        then
            date >> curl.log
        else exit
        fi
    done

```

## 3. Обязательная задача 3

Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.


### Ответ:


```bash

    hosts=(192.168.0.1 173.194.222.113 87.250.250.242)
    timeout=5

    for i in {1..5}
    do
        echo '--------------------'

        for h in ${hosts[@]}
        do
        curl -Is --connect-timeout $timeout $h:80 >/dev/null
            echo "  " $h check=$?
        done
    done

```


## 4. Обязательная задача 4

Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается.


### Ответ:


```bash
    hosts=(192.168.0.1 173.194.222.113 87.250.250.242)
    timeout=5
    r=0

    while (($r == 0))
    do
    for h in ${hosts[@]}
    do
	curl -Is --connect-timeout $timeout $h:80 >/dev/null
	r=$?
	if (($r != 0))
	then
	    echo "    ERROR on " $h check=$r >>error.log
        exit
    else
        echo "    " $h check=$r >> hosts.log
	fi
    

```